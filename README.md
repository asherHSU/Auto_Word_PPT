# è‡ªå‹•åŒ–æ•¬æ‹œæŠ•å½±èˆ‡æ–‡ä»¶ç”Ÿæˆç³»çµ±

æœ¬å°ˆæ¡ˆæ—¨åœ¨é–‹ç™¼ä¸€å¥—è‡ªå‹•åŒ–ç³»çµ±ï¼Œç”¨æ–¼ç”Ÿæˆæ•™æœƒæ•¬æ‹œæ‰€éœ€ä¹‹å¤šåª’é«”è³‡æºã€‚ç³»çµ±ä¾æ“šä½¿ç”¨è€…é¸å®šçš„è©©æ­Œåˆ—è¡¨ï¼Œèƒ½å¤ è‡ªå‹•ç”¢å‡ºé©ç”¨æ–¼å¤§å­—å ±åˆ—å°çš„ Word æ–‡ä»¶ï¼Œä»¥åŠé©ç”¨æ–¼æŠ•å½±æ’­æ”¾çš„ PowerPoint ç°¡å ±ã€‚

æœ¬ç³»çµ±å·²æ¼”é€²ç‚ºä¸€å€‹å®Œæ•´çš„å…¨ç«¯ç¶²é æ‡‰ç”¨ç¨‹å¼ (Full-stack Web Application)ã€‚å¾Œç«¯æ¡ç”¨ Node.js èˆ‡ TypeScript å»ºæ§‹ï¼Œä¸¦çµåˆ Express.js æ¡†æ¶èˆ‡ MongoDB è³‡æ–™åº«ï¼›å‰ç«¯å‰‡åŸºæ–¼ React èˆ‡ TypeScript é–‹ç™¼ï¼Œåˆ©ç”¨ Vite é€²è¡Œå»ºç½®ã€‚æ•´é«”æ¶æ§‹é€é Docker Compose å¯¦ç¾å®¹å™¨åŒ–éƒ¨ç½²ï¼Œä»¥ç¢ºä¿ç’°å¢ƒçš„ä¸€è‡´æ€§èˆ‡å¯ç§»æ¤æ€§ã€‚

## ğŸš€ ç³»çµ±åŠŸèƒ½ (System Features)

- **è©©æ­Œè³‡æ–™åº«ç®¡ç† (Song Database Management)**
å»ºç«‹çµæ§‹åŒ–çš„è³‡æ–™åº«ä»¥å„²å­˜è©©æ­Œè³‡è¨Šï¼ŒåŒ…å«å”¯ä¸€è­˜åˆ¥ç¢¼ (ID) èˆ‡åç¨±ï¼Œä¾¿æ–¼è³‡æ–™çš„æŒä¹…åŒ–èˆ‡æª¢ç´¢ã€‚

- **é«˜æ•ˆç‡è©©æ­Œæª¢ç´¢ (High-Performance Search)**
æ”¯æ´é€é ID æˆ–é—œéµå­—é€²è¡Œæ¨¡ç³Šæœå°‹ï¼Œå¿«é€Ÿå®šä½æ‰€éœ€è©©æ­Œè³‡æºã€‚

- **æ¬Šé™å°å‘ä¹‹è³‡æ–™ç®¡ç† (Role-Based CRUD Operations)**
æä¾›å®Œæ•´çš„è©©æ­Œæ–°å¢ã€ç·¨è¼¯èˆ‡åˆªé™¤åŠŸèƒ½ã€‚ç³»çµ±å¯¦ä½œäº†åŸºæ–¼è§’è‰²çš„å­˜å–æ§åˆ¶ (RBAC)ï¼Œç¢ºä¿åƒ…æœ‰æˆæ¬Šä¹‹ç®¡ç†å“¡èƒ½åŸ·è¡Œè³‡æ–™ç•°å‹•æ“ä½œã€‚

- **è‡ªå‹•åŒ–æ–‡ä»¶ç”Ÿæˆ (Automated Artifact Generation)**
æ ¸å¿ƒæ¼”ç®—æ³•èƒ½è§£æé¸å®šçš„è©©æ­Œå…§å®¹ï¼Œè‡ªå‹•æ’ç‰ˆä¸¦ç”Ÿæˆ Microsoft Word (.docx) èˆ‡ PowerPoint (.pptx) æ ¼å¼æª”æ¡ˆï¼Œå¤§å¹…é™ä½äººå·¥è£½ä½œæˆæœ¬ã€‚

- **å®‰å…¨èº«ä»½é©—è­‰ (Secure Authentication)**
å¯¦ä½œä½¿ç”¨è€…è¨»å†Šèˆ‡ç™»å…¥æ©Ÿåˆ¶ï¼Œæ¡ç”¨ JWT (JSON Web Token) æ¨™æº–é€²è¡Œç„¡ç‹€æ…‹ (Stateless) çš„èº«ä»½é©—è­‰èˆ‡æˆæ¬Šã€‚

- **å®¹å™¨åŒ–éƒ¨ç½² (Containerized Deployment)**
åˆ©ç”¨ Docker æŠ€è¡“å°è£æ‡‰ç”¨ç¨‹å¼åŠå…¶ä¾è³´ç’°å¢ƒï¼Œé€é Docker Compose å”èª¿å¤šå®¹å™¨é‹ä½œï¼Œç°¡åŒ–éƒ¨ç½²æµç¨‹ã€‚

## âš™ï¸ æŠ€è¡“æ¶æ§‹ (Technical Architecture)

æœ¬ç³»çµ±æ¡ç”¨åˆ†å±¤æ¶æ§‹è¨­è¨ˆï¼Œä»¥ä¸‹ç‚ºæŠ€è¡“å †ç–Šä¹‹æ¨¹ç‹€çµæ§‹åœ–ï¼š

```mermaid
graph TD
    root[æ•´åˆç³»çµ±æ¶æ§‹ Integrated System Architecture]
    
    %% Backend Node
    backend(âš™ï¸ å¾Œç«¯æœå‹™ Backend Service)
    root --> backend
    backend --> be1[Runtime: Node.js]
    backend --> be2[Language: TypeScript]
    backend --> be3[Framework: Express.js]
    backend --> be4[Database: MongoDB]
    backend --> be5[Logging: Winston]
    backend --> be6[Security: bcryptjs & JWT]
    backend --> be_files{æª”æ¡ˆè™•ç† File Processing}
    be_files --> f1[docx: Word Generation]
    be_files --> f2[pptxgenjs: PPT Generation]
    be_files --> f3[textract: Content Parsing]
    be_files --> f4[archiver: Compression]

    %% Frontend Node
    frontend(ğŸ’» å‰ç«¯ä»‹é¢ Frontend Interface)
    root --> frontend
    frontend --> fe1[Library: React]
    frontend --> fe2[Language: TypeScript]
    frontend --> fe3[Build Tool: Vite]
    frontend --> fe4[Styling: Material UI]

    %% Infrastructure Node
    infra(ğŸ—ï¸ åŸºç¤è¨­æ–½ Infrastructure)
    root --> infra
    infra --> inf1[Containerization: Docker]
    infra --> inf2[Orchestration: Docker Compose]
```


## ğŸ“‚ å°ˆæ¡ˆçµæ§‹ (Project Structure)

```
Auto_Word_PPT/
â”œâ”€â”€ backend/                 # å¾Œç«¯æœå‹™ (Node.js + Express + Python)
â”‚   â”œâ”€â”€ src/                 # TypeScript åŸå§‹ç¢¼
â”‚   â”‚   â”œâ”€â”€ index.ts         # ä¼ºæœå™¨å…¥å£ (API è·¯ç”±ã€MongoDB é€£ç·šã€æ¬Šé™é©—è­‰)
â”‚   â”‚   â”œâ”€â”€ generator.ts     # æª”æ¡ˆç”Ÿæˆé‚è¼¯æ§åˆ¶å™¨ (å‘¼å« Python è…³æœ¬)
â”‚   â”‚   â””â”€â”€ import-db.ts     # è³‡æ–™åº«åˆå§‹åŒ–å·¥å…· (åŒ¯å…¥ songs_db.json)
â”‚   â”œâ”€â”€ scripts/             # å¤–éƒ¨è…³æœ¬
â”‚   â”‚   â””â”€â”€ generator.py     # æ ¸å¿ƒç”Ÿæˆå¼•æ“ (ä½¿ç”¨ python-docx/pptx è™•ç†æª”æ¡ˆ)
â”‚   â”œâ”€â”€ dist/                # [Artifact] ç·¨è­¯å¾Œçš„ JavaScript åŸ·è¡Œæª”
â”‚   â”œâ”€â”€ Dockerfile           # å¾Œç«¯å®¹å™¨å»ºç½®æª”
â”‚   â”œâ”€â”€ package.json         # Node.js ç›¸ä¾å¥—ä»¶è¨­å®š
â”‚   â”œâ”€â”€ requirements.txt     # Python ç›¸ä¾å¥—ä»¶è¨­å®š
â”‚   â””â”€â”€ tsconfig.json        # TypeScript ç·¨è­¯è¨­å®š
â”œâ”€â”€ frontend/                # å‰ç«¯ä»‹é¢ (React + Vite + Material UI)
â”‚   â”œâ”€â”€ src/                 # React åŸå§‹ç¢¼
â”‚   â”‚   â”œâ”€â”€ components/      # UI å…ƒä»¶åº«
â”‚   â”‚   â”‚   â”œâ”€â”€ FileGenerator.tsx  # æª”æ¡ˆç”Ÿæˆé é¢ (æœå°‹ã€é è¦½ã€ä¸‹è¼‰)
â”‚   â”‚   â”‚   â”œâ”€â”€ Login.tsx          # ç®¡ç†å“¡ç™»å…¥å…ƒä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ SongManager.tsx    # è©©æ­Œè³‡æ–™åº«ç®¡ç†ä»‹é¢ (CRUD)
â”‚   â”‚   â”‚   â””â”€â”€ UserManager.tsx    # å¸³è™Ÿæ¬Šé™ç®¡ç†ä»‹é¢ (Super Admin)
â”‚   â”‚   â”œâ”€â”€ App.tsx          # æ‡‰ç”¨ç¨‹å¼ä¸»è·¯ç”±èˆ‡ä½ˆå±€
â”‚   â”‚   â””â”€â”€ index.tsx        # å‰ç«¯å…¥å£é»
â”‚   â”œâ”€â”€ public/              # éœæ…‹è³‡æº (åœ–ç¤ºã€Manifest)
â”‚   â”œâ”€â”€ Dockerfile           # å‰ç«¯å®¹å™¨å»ºç½®æª” (å¤šéšæ®µæ§‹å»º)
â”‚   â”œâ”€â”€ nginx.conf           # Nginx åå‘ä»£ç†è¨­å®š
â”‚   â”œâ”€â”€ package.json         # å‰ç«¯ç›¸ä¾å¥—ä»¶è¨­å®š
â”‚   â””â”€â”€ vite.config.ts       # Vite å»ºç½®è¨­å®š
â”œâ”€â”€ resources/               # éœæ…‹è³‡æºèˆ‡è¨­å®šæª” (æ›è¼‰è‡³å®¹å™¨)
â”‚   â”œâ”€â”€ ppt_library/         # å­˜æ”¾ PPTX ä¾†æºæª”æ¡ˆ
â”‚   â”œâ”€â”€ songs_db.json        # åˆå§‹è©©æ­Œè³‡æ–™åº«åŒ¯å…¥æª”
â”‚   â””â”€â”€ template.docx        # Word å¤§å­—å ±ç¯„æœ¬ (è‹¥æœ‰)
â”œâ”€â”€ output/                  # [Artifact] ç”Ÿæˆæª”æ¡ˆè¼¸å‡ºç›®éŒ„
â”œâ”€â”€ docker-compose.yml       # å®¹å™¨ç·¨æ’è¨­å®šæª”
â”œâ”€â”€ .env.example             # ç’°å¢ƒè®Šæ•¸ç¯„æœ¬
â””â”€â”€ README.md                # å°ˆæ¡ˆèªªæ˜æ–‡ä»¶
```

## ğŸ› ï¸ ç³»çµ±å»ºç½®èˆ‡åŸ·è¡Œ (Installation and Execution)

**å‰ç½®éœ€æ±‚ (Prerequisites)**

- Git: ç”¨æ–¼ç‰ˆæœ¬æ§åˆ¶èˆ‡ç¨‹å¼ç¢¼ç²å–ã€‚

- Docker & Docker Compose: å¼·çƒˆå»ºè­°å®‰è£ï¼Œä»¥ç¢ºä¿åŸ·è¡Œç’°å¢ƒèˆ‡é–‹ç™¼ç’°å¢ƒä¸€è‡´ã€‚

### 1. å–å¾—å°ˆæ¡ˆç¨‹å¼ç¢¼ (Clone Repository)
```
git clone <your-repository-url>
cd Auto_ppt_word
```

### 2. ç’°å¢ƒè®Šæ•¸é…ç½® (Configuration)

è«‹è¤‡è£½ç¯„ä¾‹è¨­å®šæª”ä»¥å»ºç«‹ .env æª”æ¡ˆï¼Œä¸¦å¡«å…¥æ‚¨çš„ç’°å¢ƒåƒæ•¸ï¼š
```
cp .env.example .env
```

**åƒæ•¸èªªæ˜ï¼š**

- `MONGO_URI`: MongoDB é€£ç·šå­—ä¸² (Docker ç’°å¢ƒå…§é è¨­ç‚º mongodb://mongo:27017)ã€‚

- `JWT_SECRET`: JWT ç°½ç½²å¯†é‘° (è­¦å‘Šï¼šåœ¨ç”Ÿç”¢ç’°å¢ƒä¸­å‹™å¿…ä½¿ç”¨é«˜å¼·åº¦çš„éš¨æ©Ÿå­—ä¸²)ã€‚

- `VITE_API_URL`: å‰ç«¯å‘¼å«å¾Œç«¯ API çš„ä½å€ (é è¨­ç‚º http://localhost:3000)ã€‚

### 3. è³‡æ–™åº«åˆå§‹åŒ– (Database Initialization)

ç³»çµ±åŒ…å«åˆå§‹åŒ–è…³æœ¬ï¼Œå¯å°‡ `resources/songs_db.json` åŒ¯å…¥è³‡æ–™åº«ã€‚
è‹¥ä½¿ç”¨ Docker Composeï¼Œè«‹åƒé–±å¾ŒçºŒç« ç¯€ï¼›è‹¥æ‰‹å‹•åŸ·è¡Œï¼Œè«‹ä½¿ç”¨ä»¥ä¸‹æŒ‡ä»¤ï¼š
```
cd backend
npm install
npm run db:import
cd ..
```

### 4. å®¹å™¨åŒ–éƒ¨ç½²èˆ‡ç¶­é‹ (Containerized Operations)

æœ¬å°ˆæ¡ˆæ¡ç”¨å¤šéšæ®µå»ºç½® (Multi-stage builds) èˆ‡ Docker Compose é€²è¡Œç®¡ç†ã€‚ä»¥ä¸‹ç‚ºå¸¸ç”¨çš„ç¶­é‹æŒ‡ä»¤ã€‚

**ğŸ”¹ å»ºç½®ä¸¦æ¨é€æ˜ åƒæª” (Build and Push Images)**

è‹¥éœ€å°‡æ‡‰ç”¨ç¨‹å¼éƒ¨ç½²è‡³é ç«¯ä¼ºæœå™¨æˆ– GCP VMï¼Œè«‹å…ˆé‡å° linux/amd64 å¹³å°å»ºç½®æ˜ åƒæª”ä¸¦æ¨é€è‡³ Registry (å¦‚ Docker Hub)ã€‚è«‹ç¢ºä¿æ‚¨å·²ç™»å…¥ Docker Hubã€‚
```
# å»ºç½®å‰ç«¯æ˜ åƒæª” (æŒ‡å®šå¹³å°ä»¥ç¢ºä¿ç›¸å®¹æ€§)
docker buildx build --no-cache --platform linux/amd64 -t asher31892774/church-frontend:latest ./frontend

# å»ºç½®å¾Œç«¯æ˜ åƒæª”
docker buildx build --no-cache --platform linux/amd64 -t asher31892774/church-backend:latest ./backend

# æ¨é€æ˜ åƒæª”è‡³ Registry
docker push asher31892774/church-frontend:latest
docker push asher31892774/church-backend:latest
```

**ğŸ”¹ æœå‹™éƒ¨ç½²èˆ‡æ›´æ–° (Deployment and Update)**

åœ¨éƒ¨ç½²ç’°å¢ƒ (å¦‚ GCP VM) ä¸­ï¼Œç•¶æ˜ åƒæª”æ›´æ–°æˆ–è¨­å®šè®Šæ›´å¾Œï¼Œè«‹ä¾åºåŸ·è¡Œä»¥ä¸‹æŒ‡ä»¤ä»¥é‡å•Ÿæœå‹™ã€‚

**æ¨™æº–æ›´æ–°æµç¨‹ï¼š**
```
docker-compose down
docker-compose up -d --build
```

**å¼·åˆ¶é‡å»ºæµç¨‹ (Force Rebuild)ï¼š**
è‹¥é‡åˆ°å¿«å–å°è‡´ç¨‹å¼ç¢¼æœªæ›´æ–°çš„å•é¡Œï¼Œè«‹ä½¿ç”¨ä»¥ä¸‹æŒ‡ä»¤å¼·åˆ¶æ¸…é™¤å¿«å–ä¸¦é‡æ–°å»ºç½®ï¼š
```
sudo docker-compose down && sudo docker-compose build --no-cache && sudo docker-compose up -d
```

### 5. é–‹ç™¼æ¨¡å¼åŸ·è¡Œ (Development Mode)

è‹¥ä¸ä½¿ç”¨ Dockerï¼Œå¯åˆ†åˆ¥å•Ÿå‹•å‰å¾Œç«¯æœå‹™é€²è¡Œé–‹ç™¼ã€‚

**å¾Œç«¯ (Backend)**
```
cd backend
npm install
npm run dev
```

æœå‹™å°‡å•Ÿå‹•æ–¼ `http://localhost:3000`ã€‚

**å‰ç«¯ (Frontend)**
```
cd frontend
npm install
npm run dev
```

æœå‹™å°‡å•Ÿå‹•æ–¼ `http://localhost:5173`ã€‚

## ğŸ§ª ç³»çµ±æ“ä½œèªªæ˜ (Usage Guide)

1. èº«ä»½é©—è­‰ï¼š
é–‹å•Ÿç€è¦½å™¨å‰å¾€å‰ç«¯é é¢ã€‚ç³»çµ±é è¨­æœƒåˆå§‹åŒ–ä¸€çµ„è¶…ç´šç®¡ç†å“¡å¸³è™Ÿ (admin / admin)ã€‚è«‹ç™»å…¥å¾Œç«‹å³ä¿®æ”¹å¯†ç¢¼ã€‚

2. å¸³è™Ÿç®¡ç† (Super Admin)ï¼š
åƒ…è¶…ç´šç®¡ç†å“¡å¯å­˜å–ã€Œå¸³è™Ÿç®¡ç†ã€é é¢ï¼Œé€²è¡Œæ–°å¢ã€ä¿®æ”¹æˆ–åˆªé™¤å…¶ä»–ç®¡ç†å“¡å¸³è™Ÿçš„æ“ä½œã€‚

3. è©©æ­Œè³‡æ–™ç¶­è­·ï¼š
é€éã€Œè©©æ­Œè³‡æ–™åº«ã€é é¢é€²è¡Œ CRUD æ“ä½œã€‚

4. è³‡æºç”Ÿæˆï¼š
æ–¼ã€Œè£½ä½œæ•¬æ‹œæª”æ¡ˆã€é é¢é¸å–è©©æ­Œï¼Œç³»çµ±å°‡è‡ªå‹•æ‰“åŒ…ç”Ÿæˆ ZIP æª”æ¡ˆä¾›ä¸‹è¼‰ã€‚

## âš ï¸ é‡è¦è²æ˜ (Important Notices)

- å®‰å…¨æ€§ (Security)ï¼š.env.example ä¸­çš„ JWT_SECRET åƒ…ä¾›é–‹ç™¼æ¸¬è©¦ä½¿ç”¨ã€‚ç”Ÿç”¢ç’°å¢ƒå‹™å¿…æ›´æ›ç‚ºé«˜å¼·åº¦å¯†é‘°ã€‚

- æª”æ¡ˆè§£æ (File Parsing)ï¼šç”¨æ–¼è§£æèˆŠç‰ˆ PowerPoint çš„ textract å¥—ä»¶å¯èƒ½å­˜åœ¨æ½›åœ¨å¼±é»ã€‚å»ºè­°åƒ…è™•ç†å—ä¿¡ä»»ä¾†æºçš„æª”æ¡ˆï¼Œä¸¦å®šæœŸé—œæ³¨è³‡å®‰é€šå ±ã€‚

- ç›¸å®¹æ€§ (Compatibility)ï¼šç›®å‰çš„æ–‡å­—æå–åŠŸèƒ½ä¸»è¦æ”¯æ´ .pptx æ ¼å¼ï¼›èˆŠç‰ˆ .ppt æª”æ¡ˆåƒ…æ”¯æ´è­˜åˆ¥ï¼Œç„¡æ³•é€²è¡Œå…§å®¹æå–ã€‚

## ğŸ§¹ è³‡æºæ¸…ç† (Resource Cleanup)

è‹¥éœ€ç§»é™¤ Docker ç”¢ç”Ÿçš„æ‰€æœ‰è³‡æº (å«ç¶²è·¯èˆ‡ Volume)ï¼š
```
docker-compose down -v
```

è‹¥éœ€ç§»é™¤æœ¬åœ°å»ºç½®ç”¢ç‰©ï¼š
```
rm -rf backend/dist backend/node_modules
rm -rf frontend/dist frontend/node_modules
```